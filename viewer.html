<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>ARea Viewer â€“ Surface AR</title>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Bangers&display=swap" rel="stylesheet"> 

  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <script src="https://unpkg.com/@ffmpeg/ffmpeg@0.12.7/dist/ffmpeg.min.js"></script>

  <style>
    :root {
      color-scheme: dark light;
      --model-vertical-offset: 0px;
      --frame-overhang: clamp(32px, 6.5vw, 72px);
      --frame-scale: 1.1;
    }
    *, *::before, *::after { box-sizing: border-box; }
    html, body {
      margin: 0; height: 100%;
      background: #000;
      font-family: system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      overscroll-behavior: none;
      touch-action: manipulation;
    }

    /* --- Neuer Startbildschirm --- */
    #start-screen {
      position: fixed; inset: 0;
      display: none; align-items: center; justify-content: center;
      background: #05070c; z-index: 1000; color: #fff;
    }
    #start-content {
      position: relative;
      width: 90%; max-width: 420px;
      overflow: visible !important;
    }
    #start-card {
      position: relative;
      background: radial-gradient(circle at top,#243b74,#05070c);
      border-radius: 24px;
      padding: 40px 24px 30px;
      text-align: center;
      z-index: 1;
      border: 1px solid rgba(255,255,255,0.1);
      box-shadow: 0 20px 50px rgba(0,0,0,0.8);
    }
    #tannengruen-frame {
      position: absolute;
      left: 50%; top: 52%;
      transform: translate(-50%, -52%) scale(var(--frame-scale));
      width: calc(100% + var(--frame-overhang) * 2);
      height: calc(100% + var(--frame-overhang) * 2);
      object-fit: contain;
      pointer-events: none;
      z-index: 2;
    }
    #start-title { 
      font-family: 'Bangers', cursive; 
      font-size: 32px; margin: 0; color: #fff; letter-spacing: 1px;
    }
    #start-subline { font-size: 15px; opacity: 0.85; margin: 4px 0 12px; color: #5ddcff; }
    #start-image { width: 100%; border-radius: 16px; margin-bottom: 15px; display: none; }
    #start-text { font-size: 14px; line-height: 1.5; margin-bottom: 20px; color: rgba(255,255,255,0.9); }
    
    #startAr {
      position: relative; z-index: 3;
      appearance: none; border: none; border-radius: 999px;
      padding: 12px 30px; font-size: 16px; font-weight: bold;
      background: linear-gradient(135deg,#5ddcff,#3c67e3); color:#fff;
      cursor: pointer; box-shadow: 0 6px 20px rgba(0,0,0,0.4);
      transition: transform .2s;
    }
    #startAr:active { transform: scale(.95); }
    #startAr[disabled] { opacity: 0.5; cursor: wait; }

    /* --- Restliche UI --- */
    #loading-status {
      position: fixed; inset: 0;
      display: flex; align-items: center; justify-content: center;
      background: #05070c; z-index: 2000; color: #fff;
    }
    #err {
      position: fixed; left: 12px; top: 12px; z-index: 3000;
      background: #b00020; color:#fff; padding:8px 10px; border-radius:8px;
      display:none; font:12px monospace;
    }
    model-viewer {
      position: fixed; inset: 0; width: 100vw; height: 100svh;
    }
    #ar-ui { position: fixed; inset:0; z-index:30; display:none; pointer-events:none; }
    .bottom-bar {
      position:absolute; left:0; right:0;
      bottom:max(env(safe-area-inset-bottom),16px);
      display:flex; align-items:center; justify-content:space-between;
      gap:22px; pointer-events:auto; padding:0 18px;
    }
    #btn-gallery, #btn-mute {
      appearance:none; border:none; background: rgba(30,30,30,0.6);
      color:#fff; border:1px solid rgba(255,255,255,0.25);
      width:44px; height:44px; border-radius:12px; font-size:18px;
    }
    #btn-capture { width:84px; height:84px; position:relative; background:none; border:none; }
    .outer-ring { position:absolute; inset:0; border: 2px solid #fff; border-radius:50%; }
    .inner-dot { width:56px; height:56px; background:#fff; border-radius:50%; position:absolute; left:14px; top:14px; }
    
    #gallery-panel {
      position:fixed; inset:0; z-index:5000;
      background:rgba(5,7,12,0.95); display:none; flex-direction:column; padding:20px;
    }
  </style>
</head>
<body>

  <div id="start-screen">
    <div id="start-content">
      <div id="start-card">
        <h1 id="start-title"></h1>
        <p id="start-subline"></p>
        <img id="start-image" alt="Vorschau"/>
        <p id="start-text"></p>
        <button id="startAr" type="button">STARTE AR</button>
      </div>
      <img id="tannengruen-frame" src="./assets/Tannengruen.png" alt="" aria-hidden="true"/>
    </div>
  </div>

  <div id="loading-status">Lade Szeneâ€¦</div>
  <div id="err"></div>

  <model-viewer id="ar-scene-element" loading="eager" camera-controls ar ar-modes="webxr scene-viewer quick-look"></model-viewer>

  <div id="ar-ui">
    <div class="bottom-bar">
      <button id="btn-gallery"><i class="fa-solid fa-images"></i></button>
      <button id="btn-capture"><span class="outer-ring"></span><span class="inner-dot"></span></button>
      <button id="btn-mute">ðŸ”Š</button>
    </div>
  </div>

  <div id="gallery-panel">
    <div id="gallery-header">
      <h2>Galerie</h2>
      <button id="btn-gallery-close">SchlieÃŸen</button>
    </div>
    <div id="gallery-grid"></div>
  </div>

  <script type="module" src="./js/index.js"></script>
</body>
</html>
